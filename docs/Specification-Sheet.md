# 蛍光分光画像撮影システム 仕様書

## 1. 概要

### 1.1. 目的
本システムは、蛍光イメージング技術を用い、マイクロプラスチック(MPs)を迅速かつ安価に識別・同定することを目的として開発する。

### 1.2. 背景
海洋のマイクロプラスチック汚染は深刻な問題であるが、既存の分析手法(FTIR等)は高価で時間がかかり、フィールドでのリアルタイム分析が困難である。本システムは、この課題を解決するためのフィールド展開可能なプロトタイプを目指す。

---
## 2. システム構成

### 2.1. ハードウェア構成
- **制御PC**: Windows
- **紫外線カメラ**: BITRAN製 CS-66UV
- **放射側用フィルターチェンジャー**: 朝日分光製 FC8-25A

#### 2.1.1. 励起光源 (選択式)
- **A) LEDユニット**
    - 紫外線パワーLEDを複数使用
    - Raspberry Pi、リレーモジュール、および専用の安定化電源で構成
- **B) キセノンランプユニット**
    - 朝日分光製 MAX-303 (300Wキセノン光源)

### 2.2. ソフトウェア構成
- **OS**: Windows
- **開発言語**: Python 3
- **設定ファイル**: `config/settings.ini` にて、使用する光源システム(`system_type`)や各デバイスのCOMポートを設定

---
## 3. システム機能要件

### 3.1. 励起光源制御機能
- **キセノンシステムの場合:**
    - GUIからシャッターの開閉を制御できること。
    - GUIから内蔵フィルターチェンジャーを指定のポジションに回転させることができること。
- **LEDシステムの場合:**
    - GUIから指定された波長の紫外線LEDを個別にON/OFF制御できること。

### 3.2. 放射側フィルター制御機能
- GUIから外付けフィルターチェンジャー(FC8-25A)を指定のポジションに回転させることができること。

### 3.3. 撮像機能
- 露光時間、ゲイン等のカメラパラメータを設定し、静止画を撮影できること。

### 3.4. 自動シーケンス撮影機能
- 選択された光源システムに応じて、「励起側操作(フィルターorLED) → 放射側フィルター移動 → カメラ撮影」の一連の動作を自動で実行できること。

### 3.5. データ保存機能
- 撮影した画像ファイルと共に、撮影条件（励起波長、フィルター、露光時間など）をメタデータとして記録・保存できること。

---
## 4. GUI要件
- 励起波長（LED）の選択UI
- 放射側フィルターの選択UI
- 露光時間などのカメラ設定UI
- 撮影開始ボタン
- 撮影した画像のプレビュー表示エリア
- システムの状態を表示するステータスログエリア
